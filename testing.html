<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Info</title>
</head>

<body>
    <button id="searchButton">Click</button>
    <p id="result"></p>
    <!-- Add an empty div for the map element -->
    <div id="map" style="height: 0px; width: 0px;"></div>

    <!-- Load Google Maps API with the Places library -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAPaLG9G4eWFSCzdsrRrbft65xZHXGiOJg&libraries=places"
        async defer></script>

    <script>
        function getStoreInfo(lat, lng) {
            const geocoder = new google.maps.Geocoder();
            const latlng = new google.maps.LatLng(lat, lng);

            geocoder.geocode({ location: latlng }, (results, status) => {
                if (status === google.maps.GeocoderStatus.OK) {
                    const address = results[0].formatted_address;

                    // Show geocoded address in the result paragraph
                    document.getElementById("result").innerText = `Geocoded Address: ${address}`;

                    const nearbyPlacesRequest = {
                        location: latlng,
                        radius: 500, // Search within a 500-meter radius
                        type: ['store'] // Specify the type of place you're looking for
                    };

                    const service = new google.maps.places.PlacesService(document.getElementById("map"));
                    service.nearbySearch(nearbyPlacesRequest, (results, status) => {
                        if (status === google.maps.places.PlacesServiceStatus.OK) {
                            let storeInfo = "Nearby stores:\n";
                            results.forEach((place) => {
                                const storeName = place.name || "N/A";
                                const storeAddress = place.vicinity || "N/A";

                                storeInfo += `Store Name: ${storeName}\nStore Address: ${storeAddress}\n\n`;
                            });

                            // Show the results in the result paragraph
                            document.getElementById("result").innerText += "\n\n" + storeInfo;
                        } else {
                            console.error("Nearby search failed:", status);
                        }
                    });
                } else {
                    console.error("Geocoding failed:", status);
                }
            });
        }

        document.getElementById("searchButton").addEventListener("click", () => {
            const latitude = 3.139;
            const longitude = 101.6869;
            getStoreInfo(latitude, longitude);
        });
    </script>
</body>

</html>